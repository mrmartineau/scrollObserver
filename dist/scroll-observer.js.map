{"version":3,"file":"scroll-observer.js","sources":["../node_modules/just-throttle/index.js","../index.js"],"sourcesContent":["module.exports = throttle;\n\nfunction throttle (fn, interval, immediate) {\n  var wait = false;\n  var callNow = false;\n  return function () {\n    var callNow = immediate && !wait;\n    var context = this;\n    var args = arguments;\n    if (!wait) {\n      wait = true;\n      setTimeout(function () {\n        wait = false;\n        return fn.apply(context, args);\n      }, interval);\n    }\n    if (callNow) {\n      return fn.apply(this, arguments);\n    }\n  }\n}\n","/**\n * ScrollObserver\n * @description Add a class to an element when a specific scroll threshold has been reached\n *\n * @module\n * @author Zander Martineau\n */\nimport throttle from 'just-throttle'\nexport default class {\n  /**\n   * @constructor\n   * @param {Element} element\n   * @param {Object} opts\n   */\n  constructor(element, opts) {\n    this.element = element;\n    const defaultOpts = {\n      threshold: 1,\n      classNameActive: 'scrollObserver-active',\n      classNameInactive: 'scrollObserver-inactive',\n      throttle: 100,\n    };\n    this.opts = Object.assign({}, defaultOpts, opts);\n\n    if (this.opts.threshold === 'this') {\n      this.threshold = getOffset(this.element);\n    } else {\n      if (typeof parseInt(this.opts.threshold, 10) === 'Number') {\n        this.threshold = parseInt(this.opts.threshold, 10);\n      } else {\n        throw new Error('2nd param should either be an integer or \"this\"');\n      }\n    }\n\n    this.addEvents();\n  }\n\n  addEvents() {\n    window.addEventListener('scroll', throttle(this.onScroll.bind(this), this.opts.throttle));\n  }\n\n  onScroll(e) {\n    const scrollYPos = window.pageYOffset || document.body.scrollTop;\n\n    if (scrollYPos >= this.threshold) {\n      this.thresholdReached();\n    } else {\n      this.release();\n    }\n  }\n\n  thresholdReached() {\n    this.element.classList.add(this.opts.classNameActive);\n    this.element.classList.remove(this.opts.classNameInactive);\n  }\n\n  release() {\n    this.element.classList.remove(this.opts.classNameActive);\n    this.element.classList.add(this.opts.classNameInactive);\n  }\n}\n\nconst getOffset = elem => {\n  let top = 0;\n\n  while (elem) {\n    top = top + parseInt(elem.offsetTop, 10);\n    elem = elem.offsetParent;\n  }\n\n  return top\n};\n"],"names":["fn","interval","immediate","wait","callNow","context","this","args","arguments","setTimeout","apply","element","opts","Object","assign","threshold","getOffset","parseInt","Error","addEvents","addEventListener","throttle","onScroll","bind","e","window","pageYOffset","document","body","scrollTop","thresholdReached","release","classList","add","classNameActive","remove","classNameInactive","elem","let","top","offsetTop","offsetParent"],"mappings":"AAAA,MAEA,SAAmBA,EAAIC,EAAUC,GAC/B,IAAIC,GAAO,EACX,OACO,WACL,IAAIC,EAAUF,IAAcC,EACxBE,EAAUC,KACVC,EAAOC,UAQX,GAPKL,IACHA,GAAO,EACPM,WAAW,WAET,OADAN,GAAO,EACAH,EAAGU,MAAML,EAASE,IACxBN,IAEDG,EACF,OAAOJ,EAAGU,MAAMJ,KAAME,aCT5B,MAME,SAAYG,EAASC,QACdD,QAAUA,UAOVC,KAAOC,OAAOC,qBALN,kBACM,0CACE,mCACT,KAE+BF,GAEf,SAAxBN,KAAKM,KAAKG,eACPA,UAAYC,EAAUV,KAAKK,aAC3B,IAC4C,iBAAtCM,SAASX,KAAKM,KAAKG,UAAW,UAGjC,IAAIG,MAAM,wDAFXH,UAAYE,SAASX,KAAKM,KAAKG,UAAW,SAM9CI,yBAGPA,4BACSC,iBAAiB,SAAUC,EAASf,KAAKgB,SAASC,KAAKjB,MAAOA,KAAKM,KAAKS,wBAGjFC,kBAASE,IACYC,OAAOC,aAAeC,SAASC,KAAKC,YAErCvB,KAAKS,eAChBe,wBAEAC,uBAITD,iCACOnB,QAAQqB,UAAUC,IAAI3B,KAAKM,KAAKsB,sBAChCvB,QAAQqB,UAAUG,OAAO7B,KAAKM,KAAKwB,gCAG1CL,wBACOpB,QAAQqB,UAAUG,OAAO7B,KAAKM,KAAKsB,sBACnCvB,QAAQqB,UAAUC,IAAI3B,KAAKM,KAAKwB,wBAInCpB,WAAYqB,GAGhB,IAFAC,IAAIC,EAAM,EAEHF,GACLE,GAAYtB,SAASoB,EAAKG,UAAW,IACrCH,EAAOA,EAAKI,aAGd,OAAOF"}